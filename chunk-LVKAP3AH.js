import{a as U,b as j}from"./chunk-QIAYQAXZ.js";import{b as F}from"./chunk-TMQFNK2F.js";import{a as z}from"./chunk-AQTYGO5Q.js";import{e as b,f as E}from"./chunk-LK7TKE3M.js";import{a as x}from"./chunk-Z2WEJKII.js";import{b as N,c as p,e as P,f as T,j as A,k as O,l as I,m as R,o as G,p as K,q as L}from"./chunk-2UWYRXKY.js";import{a as B}from"./chunk-76W2CUH6.js";import"./chunk-QFK7VPNF.js";import{c as D,d as q}from"./chunk-5674PVL2.js";import"./chunk-4YRY4IP2.js";import{m as k,n as M}from"./chunk-EM5XZP4M.js";import{V as w}from"./chunk-CK7WZHKF.js";import{$a as g,Fb as S,Ga as r,Ua as f,Xa as c,Y as s,aa as C,bb as d,fb as t,gb as i,hb as l,mb as h,xb as o}from"./chunk-O2BEBOXS.js";import{e as v}from"./chunk-ACKELEN3.js";function V(n,a){n&1&&(t(0,"small",9),o(1,"Este campo es obligatorio"),i())}function W(n,a){n&1&&(t(0,"small",9),o(1,"Este campo es obligatorio"),i())}function Y(n,a){n&1&&(t(0,"small",9),o(1,"Este campo es obligatorio"),i())}function Z(n,a){n&1&&(t(0,"small",9),o(1,"Introduce un correo electronico valido"),i())}function H(n,a){n&1&&(t(0,"small",9),o(1,"Este campo es obligatorio"),i())}function J(n,a){n&1&&(t(0,"small",9),o(1,"Este campo es obligatorio"),i())}var _=class n{_fb=s(R);_messageService=s(w);_authService=s(F);_familyService=s(x);_utils=s(M);router=s(b);form=this._fb.group({name:this._fb.control("",[p.required]),lastName:this._fb.control("",[p.required]),email:this._fb.control("",[p.required,p.email]),password:this._fb.control("",[p.required]),secretKey:this._fb.control("",[p.required])});submit(){return v(this,null,function*(){this.form.markAllAsTouched(),this.form.valid?this.form.value.secretKey==="123456"?yield this.createAccount():this._messageService.add({severity:"error",summary:"Error",detail:"La clave secreta no es correcta",life:3e3}):this._messageService.add({severity:"error",summary:"Error",detail:"Por favor, revisa los campos marcados",life:3e3})})}signInWithGoogle(){return v(this,null,function*(){yield this._authService.signInWithGoogle().then(()=>{this._messageService.add({severity:"success",summary:"Registro exitoso",detail:"\xA1Bienvenido a la Alcancia del Rancho!",life:3e3}),this.router.navigateByUrl("")}).catch(a=>{this._messageService.add({severity:"error",summary:"Error al crear cuenta",detail:"Por favor comunicate con el desarrollador Code:"+a.code,sticky:!0})})})}createAccount(){return v(this,null,function*(){let{name:a,lastName:u,email:e,password:y}=this.form.value;try{let m=yield this._authService.singUp(e,y);console.log("User: "+m),!k.mockUp&&m&&(yield this._authService.updateName(a),this._messageService.add({severity:"success",summary:"Registro exitoso",detail:"\xA1Bienvenido a la Alcancia del Rancho!",life:3e3}),(yield this._familyService.getFamily(m.user.uid))||this._familyService.addFamily({id:m.user.uid,nombres:a,apellidos:u,admin:!1}))}catch(m){console.error("Error: "+m),this._messageService.add({severity:"error",summary:"Error al crear cuenta",detail:m.message,sticky:!0})}})}static \u0275fac=function(u){return new(u||n)};static \u0275cmp=C({type:n,selectors:[["app-singup"]],standalone:!0,features:[S],decls:51,vars:28,consts:[[1,"wrapper"],[1,"card"],[1,"container"],[3,"formGroup"],["label","Inicia sesi\xF3n","routerLink","/auth/login",3,"link"],[1,"input-group"],["variant","in"],["formControlName","name","id","name","type","text","pInputText","","fluid","true","pSize","small"],["for","name"],[1,"label-error"],["formControlName","lastName","id","lastName","type","text","pInputText","","fluid","true","pSize","small"],["for","lastName"],["formControlName","email","id","email","type","email","pInputText","","fluid","true","pSize","small"],["for","email"],["formControlName","password","id","password","promptLabel","Crea una contrase\xF1a","weakLabel","Muy simple","mediumLabel","Dificultad media","strongLabel","Dificultad alta","fluid","true","pSize","small",3,"toggleMask"],["for","password"],["formControlName","secretKey","id","secret-key","fluid","true","pSize","small",3,"feedback","toggleMask"],["for","secret-key"],[1,"button-container"],["label","Crear cuenta","severity","success",3,"onClick","rounded"],[3,"onClick","outlined"],["width","24","height","24","src","https://img.icons8.com/color/48/google-logo.png","alt","google-logo"]],template:function(u,e){u&1&&(t(0,"div",0)(1,"p-card",1)(2,"div",2)(3,"h2"),o(4,"Crear una cuenta"),i(),t(5,"span"),o(6,"\xA1Bienvenido a la Alcancia del Rancho!"),i(),t(7,"form",3)(8,"small"),o(9,"Ya tienes una cuenta? "),l(10,"p-button",4),i(),t(11,"div",5)(12,"div")(13,"p-floatlabel",6),l(14,"input",7),t(15,"label",8),o(16,"Nombre"),i()(),f(17,V,2,0,"small",9),i(),t(18,"div")(19,"p-floatlabel",6),l(20,"input",10),t(21,"label",11),o(22,"Apellidos"),i()(),f(23,W,2,0,"small",9),i(),t(24,"div")(25,"p-floatlabel",6),l(26,"input",12),t(27,"label",13),o(28,"Correo electronico"),i()(),f(29,Y,2,0,"small",9)(30,Z,2,0,"small",9),i(),t(31,"div")(32,"p-floatlabel",6),l(33,"p-password",14),t(34,"label",15),o(35,"Crea una contrase\xF1a"),i()(),f(36,H,2,0,"small",9),i(),t(37,"div")(38,"p-floatlabel",6),l(39,"p-password",16),t(40,"label",17),o(41,"Clave secreta"),i()(),f(42,J,2,0,"small",9),i()(),t(43,"div",18)(44,"p-button",19),h("onClick",function(){return e.submit()}),i(),t(45,"span"),o(46,"o"),i(),t(47,"p-button",20),h("onClick",function(){return e.signInWithGoogle()}),l(48,"img",21),t(49,"span"),o(50,"Acceder con Google"),i()()()()()()()),u&2&&(r(7),c("formGroup",e.form),r(3),c("link",!0),r(4),g(e.form.controls.name.invalid&&e.form.controls.name.touched?"ng-invalid ng-dirty":""),r(3),d(e.form.controls.name.invalid&&e.form.controls.name.touched?17:-1),r(3),g(e.form.controls.lastName.invalid&&e.form.controls.lastName.touched?"ng-invalid ng-dirty":""),r(3),d(e.form.controls.name.invalid&&e.form.controls.name.touched?23:-1),r(3),g(e.form.controls.email.invalid&&e.form.controls.email.touched?"ng-invalid ng-dirty":""),r(3),d(e.form.controls.email.getError("required")&&e.form.controls.email.touched?29:-1),r(),d(e.form.controls.email.getError("email")&&e.form.controls.email.touched?30:-1),r(3),g(e.form.controls.password.invalid&&e.form.controls.password.touched?"ng-invalid ng-dirty":""),c("toggleMask",!0),r(3),d(e.form.controls.password.invalid&&e.form.controls.password.touched?36:-1),r(3),g(e.form.controls.secretKey.invalid&&e.form.controls.secretKey.touched?"ng-invalid ng-dirty":""),c("feedback",!1)("toggleMask",!0),r(3),d(e.form.controls.secretKey.invalid&&e.form.controls.secretKey.touched?42:-1),r(2),c("rounded",!0),r(3),c("outlined",!0))},dependencies:[B,z,j,U,q,D,L,K,G,A,N,P,T,O,I,E],styles:['[_nghost-%COMP%]{display:flex;gap:1rem;height:100%;background-image:url("./media/bg-rancho-AR2NZEUE.jpeg");background-color:#f5f5f5;background-size:cover;background-position:center;background-repeat:no-repeat}.wrapper[_ngcontent-%COMP%]{width:100%;display:flex;gap:1rem;background-color:#00000094}.card[_ngcontent-%COMP%]{margin:0 auto}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}form[_ngcontent-%COMP%]{width:100%}.input-group[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:.5rem}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:1rem;gap:10px}small[_ngcontent-%COMP%]{display:block}h2[_ngcontent-%COMP%]{margin:.5rem 0}.flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;gap:2rem}@media (min-width: 750px){.wrapper[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:center}.card[_ngcontent-%COMP%]{margin:0}}@media (max-width: 749px){.wrapper[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}}']})};export{_ as default};
