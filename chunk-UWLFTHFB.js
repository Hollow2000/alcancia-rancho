import{C as u,D as m,F as v,G as g,H as p,I as _,J as i,K as f,y as d,z as l}from"./chunk-5CKZWRBR.js";import{S as a,Y as n,g as c}from"./chunk-O2BEBOXS.js";import{e as s}from"./chunk-ACKELEN3.js";var h=class t{concurrentReq=0;_isLoading=new c(0);isLoading=this._isLoading.asObservable();show(){this._isLoading.next(++this.concurrentReq)}hide(){this._isLoading.next(--this.concurrentReq)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})};var U=class t{_auth=n(l);_utils=n(f);_loaderService=n(h);mockIsLogged=i.isLogged;get authState$(){return u(this._auth)}logOut(){return s(this,null,function*(){if(this._loaderService.show(),i.mockUp)return yield this._utils.delay(2),this._loaderService.hide(),this.mockIsLogged=!1,Promise.resolve();let e=yield p(this._auth);return this._loaderService.hide(),e})}singUp(e,r){return s(this,null,function*(){if(this._loaderService.show(),i.mockUp)return yield this._utils.delay(2),this._loaderService.hide(),this.mockIsLogged=!0,Promise.resolve();yield m(this._auth,e,r).then(o=>(this._loaderService.hide(),o)).catch(o=>{throw this._loaderService.hide(),o})})}login(e,r){return s(this,null,function*(){if(this._loaderService.show(),i.mockUp)return yield this._utils.delay(2),this._loaderService.hide(),this.mockIsLogged=!0,Promise.resolve();yield v(this._auth,e,r).then(o=>(this._loaderService.hide(),o)).catch(o=>{throw this._loaderService.hide(),o})})}updateName(e){return s(this,null,function*(){if(this._auth.currentUser&&!i.mockUp)return _(this._auth.currentUser,{displayName:e})})}getUserName(){return i.mockUp?"Mock Up":this._auth.currentUser?.displayName}getUserImage(){return i.mockUp?void 0:this._auth.currentUser?.photoURL??void 0}signInWithGoogle(){return s(this,null,function*(){if(this._loaderService.show(),i.mockUp)return yield this._utils.delay(2),this._loaderService.hide(),this.mockIsLogged=!0,Promise.resolve();yield g(this._auth,new d).then(e=>(this._loaderService.hide(),e)).catch(e=>{throw this._loaderService.hide(),e})})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})};export{h as a,U as b};
