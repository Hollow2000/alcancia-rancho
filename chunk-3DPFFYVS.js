import{a as B,b as V}from"./chunk-OGOWV2N7.js";import{a as H,b as Z,c as q,d as G,g as J,i as Q,j as ie}from"./chunk-F7WXAVJ6.js";import{b as X,d as Y,e as ee}from"./chunk-OZM4M3SY.js";import"./chunk-X3NZJPVB.js";import{b as z,e as R,g as A,l as W,n as U}from"./chunk-XPPZ5LMI.js";import{a as K}from"./chunk-FECFFWDS.js";import"./chunk-KEDTMOP6.js";import{c as te}from"./chunk-PMN55GJU.js";import"./chunk-4YRY4IP2.js";import{J as N,K as j}from"./chunk-RQSIZWTQ.js";import"./chunk-OYKZXE7R.js";import{Ab as D,Cb as L,Db as _,Fa as r,Nb as b,Oa as f,S as I,Ta as p,Wa as c,Y as u,Za as s,aa as E,ab as d,bb as y,cb as x,db as C,eb as o,fb as a,gb as l,ja as S,ka as M,kb as $,lb as O,mb as n,ub as v,xb as w,yb as k,zb as P}from"./chunk-ZBDPCDAU.js";import"./chunk-ACKELEN3.js";var ne="familiares",F=class e{_firestore=u(X);_collectionRef=ee(this._firestore,ne);family$=f([]);loading$=f(!1);mockFamifly$=f([{nombres:"Saul Emmanuel",apellidos:"Moedano Miguel",admin:!0},{nombres:"Diana Laura",apellidos:"Cortes Zarate",admin:!1}]);getFamilyList(){return this.loading$.set(!0),N.mockUp?(setTimeout(()=>{this.loading$.set(!1)},2e3),this.mockFamifly$):(Y(this._collectionRef,{idField:"id"}).subscribe({next:t=>{this.family$.set(t),this.loading$.set(!1)},error:t=>{this.loading$.set(!1),console.error("Error al obtener la colecci\xF3n "+ne+": ",t)}}),this.family$)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})};var h=()=>({width:"30px",height:"30px"}),ae=()=>({height:"100%"});function le(e,i){if(e&1){let t=$();o(0,"div",5)(1,"h3"),v(2,"Familiares registrados"),a(),l(3,"p-button",6),a(),o(4,"div",5)(5,"p-iconfield"),l(6,"p-inputicon",7),o(7,"input",8),D("ngModelChange",function(g){S(t);let T=n();return P(T.filter,g)||(T.filter=g),M(g)}),O("input",function(){S(t);let g=n();return M(g.onFilter())}),a()()()}if(e&2){let t=n();r(7),k("ngModel",t.filter)}}function me(e,i){if(e&1&&(o(0,"div",9)(1,"div",10),l(2,"p-skeleton",11)(3,"p-skeleton",12),a(),o(4,"div",13),l(5,"p-button",14)(6,"p-button",15),a()()),e&2){let t=n(3);r(3),c("width",t._utils.randomNumberInt(6,15).toString()+"rem"),r(2),s(_(5,h)),r(),s(_(6,h))}}function pe(e,i){if(e&1&&x(0,me,7,7,"div",9,y),e&2){let t=n(2);C(t._utils.arrayOf(10))}}function ce(e,i){if(e&1&&l(0,"p-avatar",16),e&2){let t=n().$implicit;c("image",t.foto)}}function se(e,i){if(e&1&&l(0,"p-avatar",17),e&2){let t=n().$implicit,m=n(3);c("label",m.getIniciales(t))}}function de(e,i){e&1&&l(0,"i",18)}function _e(e,i){if(e&1&&(o(0,"div",9)(1,"div",10),p(2,ce,1,1,"p-avatar",16)(3,se,1,1,"p-avatar",17),o(4,"h4"),v(5),a(),p(6,de,1,0,"i",18),a(),o(7,"div",13),l(8,"p-button",19)(9,"p-button",20),a()()),e&2){let t=i.$implicit;r(2),d(t.foto?2:3),r(3),w("",t.nombres," ",t.apellidos,""),r(),d(t.admin?6:-1),r(2),s(_(8,h)),r(),s(_(9,h))}}function ue(e,i){if(e&1&&x(0,_e,10,10,"div",9,y),e&2){let t=n().$implicit;C(t)}}function fe(e,i){if(e&1&&p(0,pe,2,0)(1,ue,2,0),e&2){let t=n();d(t.loading$()?0:1)}}function ge(e,i){if(e&1&&(o(0,"p-card")(1,"div",10),l(2,"p-skeleton",11)(3,"p-skeleton",12),a(),o(4,"div",13),l(5,"p-button",23)(6,"p-button",24),a()()),e&2){let t=n(3);s(_(3,ae)),r(3),c("width",t._utils.randomNumberInt(6,15).toString()+"rem")}}function ye(e,i){if(e&1&&x(0,ge,7,4,"p-card",22,y),e&2){let t=n(2);C(t._utils.arrayOf(10))}}function xe(e,i){if(e&1&&l(0,"p-avatar",16),e&2){let t=n().$implicit;c("image",t.foto)}}function Ce(e,i){if(e&1&&l(0,"p-avatar",17),e&2){let t=n().$implicit,m=n(3);c("label",m.getIniciales(t))}}function ve(e,i){e&1&&l(0,"i",18)}function be(e,i){if(e&1&&(o(0,"p-card")(1,"div",10),p(2,xe,1,1,"p-avatar",16)(3,Ce,1,1,"p-avatar",17),o(4,"h4"),v(5),a(),p(6,ve,1,0,"i",18),a(),o(7,"div",13),l(8,"p-button",25)(9,"p-button",26),a()()),e&2){let t=i.$implicit;s(_(6,ae)),r(2),d(t.foto?2:3),r(3),w("",t.nombres," ",t.apellidos,""),r(),d(t.admin?6:-1)}}function Fe(e,i){if(e&1&&x(0,be,10,7,"p-card",22,y),e&2){let t=n().$implicit;C(t)}}function he(e,i){if(e&1&&(o(0,"div",21),p(1,ye,2,0)(2,Fe,2,0),a()),e&2){let t=n();r(),d(t.loading$()?1:2)}}var oe=class e{_deviceService=u(Q);_familyService=u(F);_utils=u(j);family$=this._familyService.getFamilyList();loading$=this._familyService.loading$;filter="";subscription;layout="list";ngOnInit(){this.subscription=this._deviceService.isMobile$.subscribe(i=>{this.layout=i?"list":"grid"})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getIniciales(i){return i.nombres[0]+i.apellidos[0]}onFilter(){this.family$=f(this._familyService.getFamilyList()().filter(i=>i.nombres.toLowerCase().includes(this.filter.toLowerCase())||i.apellidos.toLowerCase().includes(this.filter.toLowerCase())))}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=E({type:e,selectors:[["app-family"]],standalone:!0,features:[L],decls:8,vars:2,consts:[["dv",""],["header",""],["list",""],["grid",""],["emptyMessage","No hay resultados para mostrar",3,"value","layout"],[1,"header"],["label","Nuevo familiar"],["styleClass","pi pi-search"],["type","text","pInputText","","placeholder","Buscar","pSize","small",3,"ngModelChange","input","ngModel"],[1,"border-bottom","item-list"],[1,"item-info"],["width","3rem","height","1rem","shape","circle","size","2rem"],["height","1rem",3,"width"],[1,"item-controls"],["icon","pi pi-pencil","disabled","true","rounded","true"],["icon","pi pi-trash","disabled","true","severity","danger","rounded","true"],["shape","circle",3,"image"],["shape","circle",3,"label"],[1,"pi","pi-verified",2,"color","green"],["icon","pi pi-pencil","rounded","true"],["icon","pi pi-trash","severity","danger","rounded","true"],[1,"grid-container"],[3,"style"],["icon","pi pi-pencil","disabled","true","label","Editar","rounded","true","size","small"],["icon","pi pi-trash","disabled","true","label","Eliminar","severity","danger","rounded","true","size","small"],["icon","pi pi-pencil","label","Editar","rounded","true","size","small"],["icon","pi pi-trash","label","Eliminar","severity","danger","rounded","true","size","small"]],template:function(t,m){t&1&&(o(0,"p-dataview",4,0),p(2,le,8,1,"ng-template",null,1,b)(4,fe,2,1,"ng-template",null,2,b)(6,he,3,1,"ng-template",null,3,b),a()),t&2&&c("value",m.family$())("layout",m.layout)},dependencies:[K,te,J,V,B,Z,H,G,q,U,W,z,R,A,ie],styles:[".header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem;align-items:center}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid var(--p-content-border-color)}h4[_ngcontent-%COMP%]{margin:0}.item-list[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem}.item-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem}.item-controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:.5rem}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:10px;grid-row-gap:10px;background-color:var(--background-color);padding:10px}@media (max-width: 1000px){.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:10px;grid-row-gap:10px;background-color:var(--background-color);padding:10px}}@media (min-width: 1001px){.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-column-gap:10px;grid-row-gap:10px;background-color:var(--background-color);padding:10px}}"]})};export{oe as FamilyComponent};
