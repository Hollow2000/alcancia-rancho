import{a as ae}from"./chunk-S5CCJT7T.js";import{e as Q,f as X,g as Y,h as ee,i as ne,j as me}from"./chunk-LARQQBPT.js";import{b as oe,d as O,e as re,g as F,h as D}from"./chunk-BZQ3RO3J.js";import"./chunk-UBNITDF4.js";import{c as G}from"./chunk-IQPFT2FH.js";import{e as H,g as J,l as K}from"./chunk-XPPZ5LMI.js";import{a as te,b as ie}from"./chunk-FECFFWDS.js";import"./chunk-KEDTMOP6.js";import{c as le}from"./chunk-PMN55GJU.js";import"./chunk-4YRY4IP2.js";import{J as U,K as Z}from"./chunk-5MJUYKAR.js";import"./chunk-OYKZXE7R.js";import{$a as V,Ab as E,Cb as z,Db as B,Fa as o,Jb as $,Kb as N,Nb as k,Oa as x,S as W,Ta as g,Wa as c,Y as u,Za as P,_a as A,aa as q,ab as _,bb as h,cb as y,db as M,eb as l,fb as a,gb as d,ja as f,ka as v,kb as R,lb as b,mb as m,tc as L,ub as p,vb as C,wb as w,xb as j,yb as S,zb as T}from"./chunk-ZBDPCDAU.js";import"./chunk-ACKELEN3.js";var ce="movimientos",I=class t{_firestore=u(oe);_collectionRef=re(this._firestore,ce);movements$=x([]);loading$=x(!1);mockMovements=x([{id:"122t4f5g4q3",cantidad:100,descripcion:"Primer ahorro",familiar:"Saul Moedano",fecha:"10 de enero de 2025",idAhorros:"5Z3RBEfu05n1EA8DBtO1",tipo:"deposito"},{id:"hq45tbrt435",cantidad:2500,descripcion:"asmd\xF1ams\xF1m amsldm\xF1amsd \xF1asmd\xF1 malsd",familiar:"Saul Emmanuel Moedano Miguel",fecha:"10 de enero de 2025",idAhorros:"5Z3RBEfu05n1EA8DBtO1",tipo:"deposito"},{id:"qa3hbe534t",cantidad:2300,descripcion:"Retiro para el marco de la puerta",familiar:"Saul Moedano",fecha:"10 de enero de 2025",idAhorros:"df3RBEfu05n1EA8DB123",tipo:"retiro"}]);getMovement(i,e){if(this.loading$.set(!0),U.mockUp)return setTimeout(()=>{this.loading$.set(!1)},2e3),i&&e?x(this.mockMovements().filter(n=>n.idAhorros===i.id&&n.tipo===e.id)):e?x(this.mockMovements().filter(n=>n.tipo===e.id)):i?x(this.mockMovements().filter(n=>n.idAhorros===i.id)):this.mockMovements;let r;if(i&&e){let n=F(this._collectionRef,D("idAhorros","==",i.id),D("tipo","==",e.id));r=O(n,{idField:"id"})}else if(e){let n=F(this._collectionRef,D("tipo","==",e.id));r=O(n,{idField:"id"})}else if(i){let n=F(this._collectionRef,D("idAhorros","==",i.id));r=O(n,{idField:"id"})}else r=O(this._collectionRef,{idField:"id"});return r.subscribe({next:n=>{this.movements$.set(n.map(s=>({id:s.id,cantidad:s.cantidad,tipo:s.tipo,descripcion:s.descripcion,fecha:s.fecha.toDate().toLocaleDateString("es-ES",{day:"2-digit",month:"long",year:"numeric"}),familiar:s.familiar,idAhorros:s.idAhorros}))),this.loading$.set(!1)},error:n=>{this.loading$.set(!1),console.error("Error al obtener la colecci\xF3n: ",n)}}),this.movements$}static \u0275fac=function(e){return new(e||t)};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};var pe=()=>({height:"100%"});function _e(t,i){t&1&&d(0,"p-button",10)}function ge(t,i){t&1&&d(0,"p-button",11)}function fe(t,i){if(t&1&&g(0,_e,1,0,"p-button",10)(1,ge,1,0,"p-button",11),t&2){let e=m(3);_((e.filterType==null?null:e.filterType.id)==="retiro"||!e.filterType?0:-1),o(),_((e.filterType==null?null:e.filterType.id)==="deposito"||!e.filterType?1:-1)}}function ve(t,i){if(t&1){let e=R();l(0,"div",6),g(1,fe,2,2),l(2,"p-select",8),b("onChange",function(){f(e);let n=m(2);return v(n.notifyFilter())}),E("ngModelChange",function(n){f(e);let s=m(2);return T(s.filterType,n)||(s.filterType=n),v(n)}),a(),l(3,"p-select",9),b("onChange",function(){f(e);let n=m(2);return v(n.notifyFilter())}),E("ngModelChange",function(n){f(e);let s=m(2);return T(s.filterSaving,n)||(s.filterSaving=n),v(n)}),a()()}if(t&2){let e=m(2);o(),_(e.filterSaving?1:-1),o(),c("options",e.filterTypeOptions),S("ngModel",e.filterType),o(),c("options",e.savings$()),S("ngModel",e.filterSaving)}}function ue(t,i){t&1&&d(0,"p-button",12)}function xe(t,i){t&1&&d(0,"p-button",13)}function Ce(t,i){if(t&1&&g(0,ue,1,0,"p-button",12)(1,xe,1,0,"p-button",13),t&2){let e=m(3);_((e.filterType==null?null:e.filterType.id)==="retiro"||!e.filterType?0:-1),o(),_((e.filterType==null?null:e.filterType.id)==="deposito"||!e.filterType?1:-1)}}function he(t,i){if(t&1){let e=R();l(0,"div",7)(1,"div",6),g(2,Ce,2,2),l(3,"p-select",8),b("onChange",function(){f(e);let n=m(2);return v(n.notifyFilter())}),E("ngModelChange",function(n){f(e);let s=m(2);return T(s.filterType,n)||(s.filterType=n),v(n)}),a(),l(4,"p-select",9),b("onChange",function(){f(e);let n=m(2);return v(n.notifyFilter())}),E("ngModelChange",function(n){f(e);let s=m(2);return T(s.filterSaving,n)||(s.filterSaving=n),v(n)}),a()()()}if(t&2){let e=m(2);o(2),_(e.filterSaving?2:-1),o(),c("options",e.filterTypeOptions),S("ngModel",e.filterType),o(),c("options",e.savings$()),S("ngModel",e.filterSaving)}}function ye(t,i){if(t&1&&(l(0,"div",5)(1,"h3"),p(2),a(),g(3,ve,4,5,"div",6),a(),g(4,he,5,5,"div",7)),t&2){let e,r=m();o(2),j("",(e=r.filterType==null?null:r.filterType.nombre)!==null&&e!==void 0?e:"Movimientos"," ",r.filterSaving?"de "+r.filterSaving.nombre:"recientes",""),o(),_(r.layout==="grid"?3:-1),o(),_(r.layout==="list"?4:-1)}}function Me(t,i){if(t&1&&(l(0,"div",14)(1,"div",15)(2,"div",16),d(3,"p-skeleton",17)(4,"p-skeleton",18),a(),d(5,"p-skeleton",19),a(),l(6,"div",20),d(7,"p-skeleton",21)(8,"p-skeleton",21)(9,"p-skeleton",21),a()()),t&2){let e=m(3);o(7),c("width",e._utils.randomNumberInt(6,15).toString()+"rem"),o(),c("width",e._utils.randomNumberInt(6,15).toString()+"rem"),o(),c("width",e._utils.randomNumberInt(6,15).toString()+"rem")}}function be(t,i){if(t&1&&y(0,Me,10,3,"div",14,h),t&2){let e=m(2);M(e._utils.arrayOf(6))}}function we(t,i){if(t&1&&(l(0,"div",14)(1,"div",15)(2,"h3"),d(3,"i"),p(4),$(5,"currency"),a(),l(6,"h3"),p(7),a()(),l(8,"div",20)(9,"span")(10,"strong"),p(11,"Nombre del ahorro: "),a(),p(12),a(),l(13,"span")(14,"strong"),p(15,"Aportado por:"),a(),p(16),a(),l(17,"span")(18,"strong"),p(19,"Descripci\xF3n: "),a(),p(20),a()()()),t&2){let e=i.$implicit,r=m(3);o(2),A(r.isDeposit(e)?"deposit":"out"),o(),V("pi ",r.isDeposit(e)?"pi-arrow-circle-down":"pi-arrow-circle-up",""),o(),w(" ",N(5,11,e.cantidad)," "),o(3),C(e.fecha),o(5),C(r.getSavingName(e.idAhorros)),o(4),w(" ",e.familiar,""),o(4),C(e.descripcion)}}function Se(t,i){if(t&1&&y(0,we,21,13,"div",14,h),t&2){let e=m().$implicit;M(e)}}function Te(t,i){if(t&1&&g(0,be,2,0)(1,Se,2,0),t&2){let e=m();_(e.loading$()?0:1)}}function Ee(t,i){if(t&1&&(l(0,"p-card")(1,"div",15)(2,"div",16),d(3,"p-skeleton",17)(4,"p-skeleton",18),a(),d(5,"p-skeleton",19),a(),l(6,"div",20),d(7,"p-skeleton",21)(8,"p-skeleton",21)(9,"p-skeleton",21),a()()),t&2){let e=m(3);P(B(5,pe)),o(7),c("width",e._utils.randomNumberInt(6,15).toString()+"rem"),o(),c("width",e._utils.randomNumberInt(6,15).toString()+"rem"),o(),c("width",e._utils.randomNumberInt(6,15).toString()+"rem")}}function Oe(t,i){if(t&1&&y(0,Ee,10,6,"p-card",23,h),t&2){let e=m(2);M(e._utils.arrayOf(6))}}function De(t,i){if(t&1&&(l(0,"p-card")(1,"div",15)(2,"h3"),d(3,"i"),p(4),$(5,"currency"),a(),l(6,"h3"),p(7),a()(),l(8,"div",20)(9,"span")(10,"strong"),p(11,"Nombre del ahorro: "),a(),p(12),a(),l(13,"span")(14,"strong"),p(15,"Aportado por:"),a(),p(16),a(),l(17,"span")(18,"strong"),p(19,"Descripci\xF3n: "),a(),p(20),a()()()),t&2){let e=i.$implicit,r=m(3);P(B(15,pe)),o(2),A(r.isDeposit(e)?"deposit":"out"),o(),V("pi ",r.isDeposit(e)?"pi-arrow-circle-down":"pi-arrow-circle-up",""),o(),w(" ",N(5,13,e.cantidad)," "),o(3),C(e.fecha),o(5),C(r.getSavingName(e.idAhorros)),o(4),w(" ",e.familiar,""),o(4),C(e.descripcion)}}function ke(t,i){if(t&1&&y(0,De,21,16,"p-card",23,h),t&2){let e=m().$implicit;M(e)}}function Fe(t,i){if(t&1&&(l(0,"div",22),g(1,Oe,2,0)(2,ke,2,0),a()),t&2){let e=m();o(),_(e.loading$()?1:2)}}var se=class t{_movementService=u(I);_savingService=u(ae);_deviceService=u(ne);_activatedRouter=u(G);_utils=u(Z);movements$=this._movementService.getMovement(this.filterSaving,this.filterType);loading$=this._movementService.loading$;subscription;layout="list";filterSaving;savings$=this._savingService.getSavings();filterType;filterTypeOptions=[{id:"retiro",nombre:"Retiros"},{id:"deposito",nombre:"Depositos"}];ngOnInit(){this.subscription=this._deviceService.isMobile$.subscribe(i=>{this.layout=i?"list":"grid"}),this._activatedRouter.queryParams.subscribe(i=>{this.filterType=this.filterTypeOptions?.find(e=>e.id===i.type),this.filterSaving=this.savings$().find(e=>e.id===i.saving),this.notifyFilter()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}isDeposit(i){return i.tipo==="deposito"}getSavingName(i){return this.savings$().find(e=>e.id===i)?.nombre}notifyFilter(){this.movements$=this._movementService.getMovement(this.filterSaving,this.filterType)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=q({type:t,selectors:[["app-home"]],standalone:!0,features:[z],decls:8,vars:2,consts:[["dv",""],["header",""],["list",""],["grid",""],[3,"value","layout"],[1,"header"],[1,"controls"],[1,"header-bottom"],["size","small","showClear","true","variant","filled","optionLabel","nombre","placeholder","Filtrar por tipo",3,"onChange","ngModelChange","options","ngModel"],["size","small","showClear","true","variant","filled","optionLabel","nombre","placeholder","Filtrar por ahorro",3,"onChange","ngModelChange","options","ngModel"],["label","Retirar dinero","size","small"],["label","Guardar dinero","size","small"],["label","Retirar","size","small"],["label","Guardar","size","small"],[1,"border-bottom","item-list"],[1,"item-header"],[2,"display","flex","gap","0.5rem"],["width","1rem","height","1rem","shape","circle","size","2rem"],["width","6rem","height","2rem"],["width","10rem","height","2rem"],[1,"item-body"],["height","1rem",3,"width"],[1,"grid-container"],[3,"style"]],template:function(e,r){e&1&&(l(0,"p-dataview",4,0),g(2,ye,5,4,"ng-template",null,1,k)(4,Te,2,1,"ng-template",null,2,k)(6,Fe,3,1,"ng-template",null,3,k),a()),e&2&&c("value",r.movements$())("layout",r.layout)},dependencies:[ee,Y,X,Q,K,H,J,ie,te,le,L,me],styles:[".header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem;align-items:center}.header-bottom[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-top:10px}.header-bottom[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:1rem;align-items:center}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid var(--p-content-border-color)}h3[_ngcontent-%COMP%]{margin:0}.item-list[_ngcontent-%COMP%]{padding:1rem}.item-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.item-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:.5rem;margin-bottom:.5rem;gap:.5rem}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:10px;grid-row-gap:10px;background-color:var(--background-color);padding:10px}.deposit[_ngcontent-%COMP%]{color:green}.out[_ngcontent-%COMP%]{color:red}@media (max-width: 1000px){.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:10px;grid-row-gap:10px;background-color:var(--background-color);padding:10px}}@media (min-width: 1001px){.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-column-gap:10px;grid-row-gap:10px;background-color:var(--background-color);padding:10px}}"]})};export{se as MovementsComponent};
