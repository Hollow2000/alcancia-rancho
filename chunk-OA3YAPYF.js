import{a as Q,b as X,c as oe}from"./chunk-JWBDBPTO.js";import"./chunk-RJULDXP5.js";import{a as te}from"./chunk-6HZ4HQKI.js";import{a as ie}from"./chunk-XIGUAVKO.js";import{c as L,e as z}from"./chunk-LK7TKE3M.js";import{h as J,i as K,j as ee}from"./chunk-L6TBZT6T.js";import{e as U,i as q,n as H}from"./chunk-2UWYRXKY.js";import{a as Y,b as Z}from"./chunk-76W2CUH6.js";import"./chunk-PVZCQTHS.js";import"./chunk-QFK7VPNF.js";import{c as ne}from"./chunk-5674PVL2.js";import"./chunk-4YRY4IP2.js";import"./chunk-73SRZ5W2.js";import{n as G}from"./chunk-EM5XZP4M.js";import{V as j}from"./chunk-CK7WZHKF.js";import{$a as M,Ab as B,Bb as T,Cb as E,Db as k,Fb as R,Ga as n,Gb as D,Mb as N,Nb as $,Pa as O,Qb as I,Ua as v,Xa as _,Y as x,_a as F,aa as A,ab as P,bb as g,cb as S,db as w,eb as b,fb as l,gb as o,hb as u,ja as s,ka as d,lb as y,mb as f,nb as p,xb as m,yb as C,yc as W,zb as h}from"./chunk-O2BEBOXS.js";import{e as V}from"./chunk-ACKELEN3.js";var ae=()=>({height:"100%"});function le(t,i){if(t&1){let e=y();l(0,"p-button",12),f("onClick",function(){s(e);let a=p(4);return d(a.goToNewMovement("retiro",a.filterSaving))}),o()}}function pe(t,i){if(t&1){let e=y();l(0,"p-button",13),f("onClick",function(){s(e);let a=p(4);return d(a.goToNewMovement("deposito",a.filterSaving))}),o()}}function me(t,i){if(t&1&&v(0,le,1,0,"p-button",10)(1,pe,1,0,"p-button",11),t&2){let e=p(3);g((e.filterType==null?null:e.filterType.id)==="retiro"||!e.filterType?0:-1),n(),g((e.filterType==null?null:e.filterType.id)==="deposito"||!e.filterType?1:-1)}}function se(t,i){if(t&1){let e=y();l(0,"div",6),v(1,me,2,2),l(2,"p-select",8),f("onChange",function(){s(e);let a=p(2);return d(a.notifyFilter())}),k("ngModelChange",function(a){s(e);let c=p(2);return E(c.filterType,a)||(c.filterType=a),d(a)}),o(),l(3,"p-select",9),f("onChange",function(){s(e);let a=p(2);return d(a.notifyFilter())}),k("ngModelChange",function(a){s(e);let c=p(2);return E(c.filterSaving,a)||(c.filterSaving=a),d(a)}),o()()}if(t&2){let e=p(2);n(),g(e.filterSaving?1:-1),n(),_("options",e.filterTypeOptions),T("ngModel",e.filterType),n(),_("options",e.allSavings$()),T("ngModel",e.filterSaving)}}function de(t,i){if(t&1){let e=y();l(0,"p-button",12),f("onClick",function(){s(e);let a=p(4);return d(a.goToNewMovement("retiro",a.filterSaving))}),o()}}function _e(t,i){if(t&1){let e=y();l(0,"p-button",13),f("onClick",function(){s(e);let a=p(4);return d(a.goToNewMovement("deposito",a.filterSaving))}),o()}}function ce(t,i){if(t&1&&v(0,de,1,0,"p-button",10)(1,_e,1,0,"p-button",11),t&2){let e=p(3);g((e.filterType==null?null:e.filterType.id)==="retiro"||!e.filterType?0:-1),n(),g((e.filterType==null?null:e.filterType.id)==="deposito"||!e.filterType?1:-1)}}function ge(t,i){if(t&1){let e=y();l(0,"div",7)(1,"div",6),v(2,ce,2,2),l(3,"p-select",8),f("onChange",function(){s(e);let a=p(2);return d(a.notifyFilter())}),k("ngModelChange",function(a){s(e);let c=p(2);return E(c.filterType,a)||(c.filterType=a),d(a)}),o(),l(4,"p-select",9),f("onChange",function(){s(e);let a=p(2);return d(a.notifyFilter())}),k("ngModelChange",function(a){s(e);let c=p(2);return E(c.filterSaving,a)||(c.filterSaving=a),d(a)}),o()()()}if(t&2){let e=p(2);n(2),g(e.filterSaving?2:-1),n(),_("options",e.filterTypeOptions),T("ngModel",e.filterType),n(),_("options",e.allSavings$()),T("ngModel",e.filterSaving)}}function ve(t,i){if(t&1&&(l(0,"div",5)(1,"h3"),m(2),o(),v(3,se,4,5,"div",6),o(),v(4,ge,5,5,"div",7)),t&2){let e,r=p();n(2),B("",(e=r.filterType==null?null:r.filterType.nombre)!==null&&e!==void 0?e:"Movimientos"," ",r.filterSaving?"de "+r.filterSaving.nombre:"recientes",""),n(),g(r.layout==="grid"?3:-1),n(),g(r.layout==="list"?4:-1)}}function ue(t,i){if(t&1&&(l(0,"div",14)(1,"div",15)(2,"div",16),u(3,"p-skeleton",17)(4,"p-skeleton",18),o(),u(5,"p-skeleton",19),o(),l(6,"div",20),u(7,"p-skeleton",21)(8,"p-skeleton",21)(9,"p-skeleton",21),o()()),t&2){let e=p(3);n(7),_("width",e._utils.randomNumberInt(6,15).toString()+"rem"),n(),_("width",e._utils.randomNumberInt(6,15).toString()+"rem"),n(),_("width",e._utils.randomNumberInt(6,15).toString()+"rem")}}function fe(t,i){if(t&1&&w(0,ue,10,3,"div",14,S),t&2){let e=p(2);b(e._utils.arrayOf(6))}}function Ce(t,i){if(t&1&&(l(0,"div",14)(1,"div",15)(2,"h3"),u(3,"i"),m(4),N(5,"currency"),o(),l(6,"h3"),m(7),o()(),l(8,"div",20)(9,"span")(10,"strong"),m(11,"Nombre del ahorro: "),o(),l(12,"span"),m(13),o(),m(14),o(),l(15,"span")(16,"strong"),m(17),o(),m(18),o(),l(19,"span")(20,"strong"),m(21,"Descripci\xF3n: "),o(),m(22),o()()()),t&2){let e=i.$implicit,r=p(3);n(2),M(r.isDeposit(e)?"deposit":"out"),n(),P("pi ",r.isDeposit(e)?"pi-arrow-circle-down":"pi-arrow-circle-up",""),n(),h(" ",$(5,16,e.cantidad)," "),n(3),C(e.fecha),n(5),M(r.isActive(e)?"":"saving-disable"),n(),C(r.getSavingName(e.idAhorros)),n(),h(" ",r.isActive(e)?"":"(Inactivo)"," "),n(3),C(r.isDeposit(e)?"Aportado por:":"Retirado por:"),n(),h(" ",e.familiar,""),n(4),C(e.descripcion)}}function xe(t,i){if(t&1&&w(0,Ce,23,18,"div",14,S),t&2){let e=p().$implicit;b(e)}}function ye(t,i){if(t&1&&v(0,fe,2,0)(1,xe,2,0),t&2){let e=p();g(e.loading$()?0:1)}}function he(t,i){if(t&1&&(l(0,"p-card")(1,"div",15)(2,"div",16),u(3,"p-skeleton",17)(4,"p-skeleton",18),o(),u(5,"p-skeleton",19),o(),l(6,"div",20),u(7,"p-skeleton",21)(8,"p-skeleton",21)(9,"p-skeleton",21),o()()),t&2){let e=p(3);F(D(5,ae)),n(7),_("width",e._utils.randomNumberInt(6,15).toString()+"rem"),n(),_("width",e._utils.randomNumberInt(6,15).toString()+"rem"),n(),_("width",e._utils.randomNumberInt(6,15).toString()+"rem")}}function Me(t,i){if(t&1&&w(0,he,10,6,"p-card",23,S),t&2){let e=p(2);b(e._utils.arrayOf(6))}}function Se(t,i){if(t&1&&(l(0,"p-card")(1,"div",15)(2,"h3"),u(3,"i"),m(4),N(5,"currency"),o(),l(6,"h3"),m(7),o()(),l(8,"div",20)(9,"span")(10,"strong"),m(11,"Nombre del ahorro: "),o(),l(12,"span"),m(13),o(),m(14),o(),l(15,"span")(16,"strong"),m(17),o(),m(18),o(),l(19,"span")(20,"strong"),m(21,"Descripci\xF3n: "),o(),m(22),o()()()),t&2){let e=i.$implicit,r=p(3);F(D(20,ae)),n(2),M(r.isDeposit(e)?"deposit":"out"),n(),P("pi ",r.isDeposit(e)?"pi-arrow-circle-down":"pi-arrow-circle-up",""),n(),h(" ",$(5,18,e.cantidad)," "),n(3),C(e.fecha),n(5),M(r.isActive(e)?"":"saving-disable"),n(),C(r.getSavingName(e.idAhorros)),n(),h(" ",r.isActive(e)?"":"(Inactivo)"," "),n(3),C(r.isDeposit(e)?"Aportado por:":"Retirado por:"),n(),h(" ",e.familiar,""),n(4),C(e.descripcion)}}function we(t,i){if(t&1&&w(0,Se,23,21,"p-card",23,S),t&2){let e=p().$implicit;b(e)}}function be(t,i){if(t&1&&(l(0,"div",22),v(1,Me,2,0)(2,we,2,0),o()),t&2){let e=p();n(),g(e.loading$()?1:2)}}var re=class t{_movementService=x(te);_savingService=x(ie);_deviceService=x(ee);_activatedRouter=x(L);_messageService=x(j);_router=x(z);_utils=x(G);movements$=O([]);loading$=this._movementService.loading$;subscription;layout="list";filterSaving;allSavings$=O([]);filterType;filterTypeOptions=[{id:"retiro",nombre:"Retiros"},{id:"deposito",nombre:"Depositos"}];ngOnInit(){return V(this,null,function*(){this.subscription=this._deviceService.isMobile$.subscribe(i=>{this.layout=i?"list":"grid"});try{this.allSavings$=yield this._savingService.getSavings(0),this._activatedRouter.queryParams.subscribe(i=>{this.filterType=this.filterTypeOptions?.find(e=>e.id===i.type),this.filterSaving=this.allSavings$().find(e=>e.id===i.saving)}),this.notifyFilter()}catch(i){this._messageService.add({severity:"error",summary:"Ocurrio un error",detail:i.message,sticky:!0})}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}goToNewMovement(i,e){this._router.navigateByUrl(`/movimientos/${i}?ahorroId=${e.id}`)}isDeposit(i){return i.tipo==="deposito"}isActive(i){return this.allSavings$().find(e=>e.id===i.idAhorros)?.activo}getSavingName(i){return this.allSavings$().find(e=>e.id===i)?.nombre}notifyFilter(){return V(this,null,function*(){try{this.movements$=yield this._movementService.getMovement(this.filterSaving,this.filterType)}catch(i){this._messageService.add({severity:"error",summary:"Ocurrio un error al obtener el listado de ahorros",detail:i.message,sticky:!0})}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=A({type:t,selectors:[["app-home"]],standalone:!0,features:[R],decls:8,vars:2,consts:[["dv",""],["header",""],["list",""],["grid",""],[3,"value","layout"],[1,"header"],[1,"controls"],[1,"header-bottom"],["size","small","showClear","true","variant","filled","optionLabel","nombre","placeholder","Filtrar por tipo",3,"onChange","ngModelChange","options","ngModel"],["size","small","showClear","true","variant","filled","optionLabel","nombre","placeholder","Filtrar por ahorro",3,"onChange","ngModelChange","options","ngModel"],["label","Retirar","size","small"],["label","Guardar","size","small"],["label","Retirar","size","small",3,"onClick"],["label","Guardar","size","small",3,"onClick"],[1,"border-bottom","item-list"],[1,"item-header"],[2,"display","flex","gap","0.5rem"],["width","1rem","height","1rem","shape","circle","size","2rem"],["width","6rem","height","2rem"],["width","10rem","height","2rem"],[1,"item-body"],["height","1rem",3,"width"],[1,"grid-container"],[3,"style"]],template:function(e,r){e&1&&(l(0,"p-dataview",4,0),v(2,ve,5,4,"ng-template",null,1,I)(4,ye,2,1,"ng-template",null,2,I)(6,be,3,1,"ng-template",null,3,I),o()),e&2&&_("value",r.movements$())("layout",r.layout)},dependencies:[X,Q,K,J,H,U,q,Z,Y,ne,W,oe],styles:[".header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem;align-items:center}.header-bottom[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;margin-top:10px}.header-bottom[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:1rem;align-items:center}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid var(--p-content-border-color)}h3[_ngcontent-%COMP%]{margin:0}.item-list[_ngcontent-%COMP%]{padding:1rem}.item-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.item-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:.5rem;margin-bottom:.5rem;gap:.5rem}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:10px;grid-row-gap:10px;background-color:var(--background-color);padding:10px}.deposit[_ngcontent-%COMP%]{color:green}.out[_ngcontent-%COMP%]{color:red}.saving-disable[_ngcontent-%COMP%]{text-decoration:line-through}@media (max-width: 1000px){.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:10px;grid-row-gap:10px;background-color:var(--background-color);padding:10px}}@media (min-width: 1001px){.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-column-gap:10px;grid-row-gap:10px;background-color:var(--background-color);padding:10px}}"]})};export{re as MovementsComponent};
