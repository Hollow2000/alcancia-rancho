import{a as B,b as D}from"./chunk-USACBN6I.js";import{b as E}from"./chunk-5S25Q3IR.js";import{a as G}from"./chunk-DVISBGTJ.js";import{f as y,g as b}from"./chunk-X5GARTW5.js";import{a as T}from"./chunk-JZLADJGY.js";import{b as k,c as u,e as M,f as P,j as F,l as O,m as L,n as R,p as A,q as N,r as I}from"./chunk-TWZ472ZY.js";import"./chunk-W6J27XCB.js";import"./chunk-DWDFKIHE.js";import{V as S,ma as w,na as x}from"./chunk-XEBEUHT2.js";import"./chunk-4YRY4IP2.js";import{Bb as v,Mb as i,Ub as C,Va as n,ba as c,fa as _,hb as g,kb as s,ob as f,qb as p,ub as t,vb as o,wb as m}from"./chunk-UK2LV4O3.js";import{e as d}from"./chunk-ACKELEN3.js";function j(l,r){l&1&&(t(0,"small",9),i(1,"Este campo es obligatorio"),o())}function V(l,r){l&1&&(t(0,"small",9),i(1,"Introduce un correo electronico valido"),o())}function z(l,r){l&1&&(t(0,"small",9),i(1,"Este campo es obligatorio"),o())}var h=class l{_fb=c(R);_messageService=c(S);_authService=c(E);router=c(y);form=this._fb.group({email:this._fb.control("",[u.required,u.email]),password:this._fb.control("",[u.required])});submit(){return d(this,null,function*(){this.form.markAllAsTouched(),this.form.valid?yield this.login():this._messageService.add({severity:"error",summary:"Error",detail:"Por favor, revisa los campos marcados",life:3e3})})}signInWithGoogle(){return d(this,null,function*(){yield this._authService.signInWithGoogle().then(()=>{this._messageService.add({severity:"success",summary:"Registro exitoso",detail:"\xA1Bienvenido a la Alcancia del Rancho!",life:3e3}),this.router.navigateByUrl("")}).catch(r=>{let a;r.code==="auth/popup-closed-by-user"?a="Cancelado por el usuario":a=r.message,console.log(r),this._messageService.add({severity:"error",summary:"Error al acceder con Google",detail:a,sticky:!0})})})}login(){return d(this,null,function*(){let{email:r,password:a}=this.form.value;yield this._authService.login(r,a).then(()=>{this._messageService.add({severity:"success",summary:"Registro exitoso",detail:"\xA1Bienvenido a la Alcancia del Rancho!",life:3e3}),this.router.navigateByUrl("")}).catch(e=>{console.error(e),this._messageService.add({severity:"error",summary:"Error al acceder",detail:e.code==="auth/invalid-credential"?"Correo o contrase\xF1a incorrectos":e.message,life:3e3})})})}static \u0275fac=function(a){return new(a||l)};static \u0275cmp=_({type:l,selectors:[["app-login"]],standalone:!0,features:[C],decls:38,vars:15,consts:[[1,"wrapper"],[1,"card"],[1,"container"],[3,"formGroup"],["label","Crea una cuenta","routerLink","/auth/register",3,"link"],[1,"input-group"],["variant","in"],["formControlName","email","id","email","type","email","pInputText","","fluid","true","pSize","small"],["for","email"],[1,"label-error"],["formControlName","password","id","password","feedback","false","fluid","true","pSize","small",3,"toggleMask"],["for","password"],["label","Recuperar contrase\xF1a","routerLink","/auth/recuperar-contrasena",3,"link"],[1,"button-container"],["label","Acceder","severity","success",3,"onClick","rounded"],[3,"onClick","outlined"],["width","24","height","24","src","https://img.icons8.com/color/48/google-logo.png","alt","google-logo"],[1,"version"]],template:function(a,e){a&1&&(t(0,"div",0)(1,"p-card",1)(2,"div",2)(3,"h2"),i(4,"Iniciar sesi\xF3n"),o(),t(5,"span"),i(6,"\xA1Bienvenido a la Alcancia del Rancho!"),o(),t(7,"form",3)(8,"small"),i(9,"No tienes una cuenta? "),m(10,"p-button",4),o(),t(11,"div",5)(12,"div")(13,"p-floatlabel",6),m(14,"input",7),t(15,"label",8),i(16,"Correo electronico"),o()(),g(17,j,2,0,"small",9)(18,V,2,0,"small",9),o(),t(19,"div")(20,"p-floatlabel",6),m(21,"p-password",10),t(22,"label",11),i(23,"Contrase\xF1a"),o()(),g(24,z,2,0,"small",9),o()(),t(25,"small"),i(26,"Olvidaste tu contrase\xF1a? "),m(27,"p-button",12),o(),t(28,"div",13)(29,"p-button",14),v("onClick",function(){return e.submit()}),o(),t(30,"span"),i(31,"o"),o(),t(32,"p-button",15),v("onClick",function(){return e.signInWithGoogle()}),m(33,"img",16),t(34,"span"),i(35,"Acceder con Google"),o()()()()()()(),t(36,"span",17),i(37,"Versi\xF3n 2.0.2"),o()),a&2&&(n(7),s("formGroup",e.form),n(3),s("link",!0),n(4),f(e.form.controls.email.invalid&&e.form.controls.email.touched?"ng-invalid ng-dirty":""),n(3),p(e.form.controls.email.getError("required")&&e.form.controls.email.touched?17:-1),n(),p(e.form.controls.email.getError("email")&&e.form.controls.email.touched?18:-1),n(3),f(e.form.controls.password.invalid&&e.form.controls.password.touched?"ng-invalid ng-dirty":""),s("toggleMask",!0),n(3),p(e.form.controls.password.invalid&&e.form.controls.password.touched?24:-1),n(3),s("link",!0),n(2),s("rounded",!0),n(3),s("outlined",!0))},dependencies:[T,G,D,B,x,w,I,N,A,F,k,M,P,O,L,b],styles:['[_nghost-%COMP%]{display:flex;gap:1rem;height:100%;background-image:url("./media/bg-rancho-AR2NZEUE.jpeg");background-color:#f5f5f5;background-size:cover;background-position:center;background-repeat:no-repeat}.wrapper[_ngcontent-%COMP%]{width:100%;display:flex;gap:1rem;background-color:#00000094}.card[_ngcontent-%COMP%]{margin:0 auto}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}form[_ngcontent-%COMP%]{width:100%}.input-group[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:.5rem}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:1rem;gap:10px}small[_ngcontent-%COMP%]{display:block}h2[_ngcontent-%COMP%]{margin:.5rem 0}.flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;gap:2rem}.version[_ngcontent-%COMP%]{font-size:12px;position:absolute;text-align:center;bottom:0;right:0;left:0}@media (min-width: 750px){.wrapper[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:center}.card[_ngcontent-%COMP%]{margin:0}}@media (max-width: 749px){.wrapper[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}}']})};export{h as default};
