import{P as Dn,Rb as Un,S as we,Sb as xn,V as Ae,X as Ln,Z as W,c as ce,ea as be,h as On,i as Nn,k as Te,l as ut,m as lt,oa as Se,ra as G,ya as Mn}from"./chunk-O2BEBOXS.js";import{a as oe,b as Cn,d as V,e as c}from"./chunk-ACKELEN3.js";var _c={mockUp:!0,isLogged:!0};var Fn=class n{generateId(){let e=new Date().getTime().toString(36),t=Math.floor(Math.random()*1e6).toString(36);return`${e}${t}`}randomNumberInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}arrayOf(e){return new Array(e)}delay(e){return new Promise(t=>setTimeout(t,e*1e3))}addElipsis(e,t){return e.length<=t?e:e.substring(0,t-3)+"..."}static \u0275fac=function(t){return new(t||n)};static \u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wn=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},hi=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],o=n[t++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},$n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,o=a?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=s>>2,f=(s&3)<<4|o>>4,m=(o&15)<<2|l>>6,I=l&63;u||(I=64,a||(m=64)),r.push(t[h],t[f],t[m],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Wn(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hi(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||l==null||f==null)throw new ht;let m=s<<2|o>>4;if(r.push(m),l!==64){let I=o<<4&240|l>>2;if(r.push(I),f!==64){let q=l<<6&192|f;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ht=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},fi=function(n){let e=Wn(n);return $n.encodeByteArray(e,!0)},ue=function(n){return fi(n).replace(/\./g,"")},pt=function(n){try{return $n.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pi(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var mi=()=>pi().__FIREBASE_DEFAULTS__,gi=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_i=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&pt(n[1]);return e&&JSON.parse(e)},ke=()=>{try{return mi()||gi()||_i()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},mt=n=>{var e,t;return(t=(e=ke())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Ec=n=>{let e=mt(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gt=()=>{var n;return(n=ke())===null||n===void 0?void 0:n.config},_t=n=>{var e;return(e=ke())===null||e===void 0?void 0:e[`_${n}`]};var Re=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function yc(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ue(JSON.stringify(t)),ue(JSON.stringify(a)),""].join(".")}function g(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function Ii(){var n;let e=(n=ke())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bn(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zn(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qn(){let n=g();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Tc(){return!Ii()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gn(){try{return typeof indexedDB=="object"}catch{return!1}}function Kn(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var vi="FirebaseError",y=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=vi,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,k.prototype.create)}},k=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Ei(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new y(i,o,r)}};function Ei(n,e){return n.replace(yi,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var yi=/\{\$([^}]+)}/g;function Jn(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function K(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(Vn(s)&&Vn(a)){if(!K(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Vn(n){return n!==null&&typeof n=="object"}function J(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Y(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function X(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Yn(n,e){let t=new ft(n,e);return t.subscribe.bind(t)}var ft=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Ti(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=dt),i.error===void 0&&(i.error=dt),i.complete===void 0&&(i.complete=dt);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Ti(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dt(){}var wc=4*60*60*1e3;function T(n){return n&&n._delegate?n._delegate:n}var A=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var $="[DEFAULT]";var It=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Re;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ai(e))try{this.getOrInitializeService({instanceIdentifier:$})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=$){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return c(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=$){return this.instances.has(e)}getOptions(e=$){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wi(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$){return this.component?this.component.multipleInstances?e:$:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function wi(n){return n===$?void 0:n}function Ai(n){return n.instantiationMode==="EAGER"}var Pe=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new It(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var bi=[],p=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(p||{}),Si={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},Ri=p.INFO,ki={[p.DEBUG]:"log",[p.VERBOSE]:"log",[p.INFO]:"info",[p.WARN]:"warn",[p.ERROR]:"error"},Pi=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=ki[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Z=class{constructor(e){this.name=e,this._logLevel=Ri,this._logHandler=Pi,this._userLogHandler=null,bi.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in p))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Si[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,p.DEBUG,...e),this._logHandler(this,p.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,p.VERBOSE,...e),this._logHandler(this,p.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,p.INFO,...e),this._logHandler(this,p.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,p.WARN,...e),this._logHandler(this,p.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,p.ERROR,...e),this._logHandler(this,p.ERROR,...e)}};var Ci=(n,e)=>e.some(t=>n instanceof t),Xn,Zn;function Oi(){return Xn||(Xn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ni(){return Zn||(Zn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Qn=new WeakMap,Et=new WeakMap,er=new WeakMap,vt=new WeakMap,Tt=new WeakMap;function Di(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(b(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Qn.set(t,n)}).catch(()=>{}),Tt.set(e,n),e}function Li(n){if(Et.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Et.set(n,e)}var yt={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Et.get(n);if(e==="objectStoreNames")return n.objectStoreNames||er.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return b(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function tr(n){yt=n(yt)}function Mi(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Ce(this),e,...t);return er.set(r,e.sort?e.sort():[e]),b(r)}:Ni().includes(n)?function(...e){return n.apply(Ce(this),e),b(Qn.get(this))}:function(...e){return b(n.apply(Ce(this),e))}}function Ui(n){return typeof n=="function"?Mi(n):(n instanceof IDBTransaction&&Li(n),Ci(n,Oi())?new Proxy(n,yt):n)}function b(n){if(n instanceof IDBRequest)return Di(n);if(vt.has(n))return vt.get(n);let e=Ui(n);return e!==n&&(vt.set(n,e),Tt.set(e,n)),e}var Ce=n=>Tt.get(n);function rr(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),o=b(a);return r&&a.addEventListener("upgradeneeded",u=>{r(b(a.result),u.oldVersion,u.newVersion,b(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),o.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}var xi=["get","getKey","getAll","getAllKeys","count"],Fi=["put","add","delete","clear"],wt=new Map;function nr(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wt.get(e))return wt.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Fi.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xi.includes(t)))return;let s=function(a,...o){return c(this,null,function*(){let u=this.transaction(a,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(o.shift())),(yield Promise.all([l[t](...o),i&&u.done]))[0]})};return wt.set(e,s),s}tr(n=>Cn(oe({},n),{get:(e,t,r)=>nr(e,t)||n.get(e,t,r),has:(e,t)=>!!nr(e,t)||n.has(e,t)}));var bt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Vi(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Vi(n){let e=n.getComponent();return e?.type==="VERSION"}var St="@firebase/app",ir="0.10.13";var P=new Z("@firebase/app"),Wi="@firebase/app-compat",$i="@firebase/analytics-compat",Hi="@firebase/analytics",Bi="@firebase/app-check-compat",zi="@firebase/app-check",ji="@firebase/auth",qi="@firebase/auth-compat",Gi="@firebase/database",Ki="@firebase/data-connect",Ji="@firebase/database-compat",Yi="@firebase/functions",Xi="@firebase/functions-compat",Zi="@firebase/installations",Qi="@firebase/installations-compat",es="@firebase/messaging",ts="@firebase/messaging-compat",ns="@firebase/performance",rs="@firebase/performance-compat",is="@firebase/remote-config",ss="@firebase/remote-config-compat",as="@firebase/storage",os="@firebase/storage-compat",cs="@firebase/firestore",us="@firebase/vertexai-preview",ls="@firebase/firestore-compat",ds="firebase",hs="10.14.1";var Rt="[DEFAULT]",fs={[St]:"fire-core",[Wi]:"fire-core-compat",[Hi]:"fire-analytics",[$i]:"fire-analytics-compat",[zi]:"fire-app-check",[Bi]:"fire-app-check-compat",[ji]:"fire-auth",[qi]:"fire-auth-compat",[Gi]:"fire-rtdb",[Ki]:"fire-data-connect",[Ji]:"fire-rtdb-compat",[Yi]:"fire-fn",[Xi]:"fire-fn-compat",[Zi]:"fire-iid",[Qi]:"fire-iid-compat",[es]:"fire-fcm",[ts]:"fire-fcm-compat",[ns]:"fire-perf",[rs]:"fire-perf-compat",[is]:"fire-rc",[ss]:"fire-rc-compat",[as]:"fire-gcs",[os]:"fire-gcs-compat",[cs]:"fire-fst",[ls]:"fire-fst-compat",[us]:"fire-vertex","fire-js":"fire-js",[ds]:"fire-js-all"};var le=new Map,ps=new Map,kt=new Map;function sr(n,e){try{n.container.addComponent(e)}catch(t){P.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Q(n){let e=n.name;if(kt.has(e))return P.debug(`There were multiple attempts to register component ${e}.`),!1;kt.set(e,n);for(let t of le.values())sr(t,n);for(let t of ps.values())sr(t,n);return!0}function Nt(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function v(n){return n.settings!==void 0}var ms={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},M=new k("app","Firebase",ms);var Pt=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new A("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw M.create("app-deleted",{appName:this._name})}};var ee=hs;function Dt(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Rt,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw M.create("bad-app-name",{appName:String(i)});if(t||(t=gt()),!t)throw M.create("no-options");let s=le.get(i);if(s){if(K(t,s.options)&&K(r,s.config))return s;throw M.create("duplicate-app",{appName:i})}let a=new Pe(i);for(let u of kt.values())a.addComponent(u);let o=new Pt(t,r,a);return le.set(i,o),o}function Oe(n=Rt){let e=le.get(n);if(!e&&n===Rt&&gt())return Dt();if(!e)throw M.create("no-app",{appName:n});return e}function Ne(){return Array.from(le.values())}function _(n,e,t){var r;let i=(r=fs[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),P.warn(o.join(" "));return}Q(new A(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var gs="firebase-heartbeat-database",_s=1,de="firebase-heartbeat-store",At=null;function ur(){return At||(At=rr(gs,_s,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(de)}catch(t){console.warn(t)}}}}).catch(n=>{throw M.create("idb-open",{originalErrorMessage:n.message})})),At}function Is(n){return c(this,null,function*(){try{let t=(yield ur()).transaction(de),r=yield t.objectStore(de).get(lr(n));return yield t.done,r}catch(e){if(e instanceof y)P.warn(e.message);else{let t=M.create("idb-get",{originalErrorMessage:e?.message});P.warn(t.message)}}})}function ar(n,e){return c(this,null,function*(){try{let r=(yield ur()).transaction(de,"readwrite");yield r.objectStore(de).put(e,lr(n)),yield r.done}catch(t){if(t instanceof y)P.warn(t.message);else{let r=M.create("idb-set",{originalErrorMessage:t?.message});P.warn(r.message)}}})}function lr(n){return`${n.name}!${n.options.appId}`}var vs=1024,Es=30*24*60*60*1e3,Ct=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ot(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return c(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=or();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let o=new Date(a.date).valueOf();return Date.now()-o<=Es}),this._storage.overwrite(this._heartbeatsCache))}catch(r){P.warn(r)}})}getHeartbeatsHeader(){return c(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=or(),{heartbeatsToSend:r,unsentEntries:i}=ys(this._heartbeatsCache.heartbeats),s=ue(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return P.warn(t),""}})}};function or(){return new Date().toISOString().substring(0,10)}function ys(n,e=vs){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),cr(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),cr(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ot=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return c(this,null,function*(){return Gn()?Kn().then(()=>!0).catch(()=>!1):!1})}read(){return c(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Is(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return c(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ar(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return c(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ar(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function cr(n){return ue(JSON.stringify({version:2,heartbeats:n})).length}function Ts(n){Q(new A("platform-logger",e=>new bt(e),"PRIVATE")),Q(new A("heartbeat",e=>new Ct(e),"PRIVATE")),_(St,ir,n),_(St,ir,"esm2017"),_("fire-js","")}Ts("");var ws="firebase",As="10.14.1";_(ws,As,"app");var he=new Un("ANGULARFIRE2_VERSION");function dr(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Mt=(n,e)=>{let t=e?[e]:Ne(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},De=class{constructor(){return Mt(bs)}},bs="app-check";function te(){}var Le=class{zone;delegate;constructor(e,t=Nn){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(s,t,r)}},Lt=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",te,{},te,te)),t.pipe(Dn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Me=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Le(Zone.current)),this.insideAngular=t.run(()=>new Le(Zone.current,On)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Ln(G))};static \u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ue(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ss(n){return Ue().ngZone.runOutsideAngular(()=>n())}function H(n){return Ue().ngZone.run(()=>n())}function Rs(n){return ks(Ue())(n)}function ks(n){return function(t){return t=t.lift(new Lt(n.ngZone)),t.pipe(lt(n.outsideAngular),ut(n.insideAngular))}}var Ps=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),H(()=>n.apply(void 0,r))},S=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=H(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",te,{},te,te))),r[s]=Ps(r[s],t));let i=Ss(()=>n.apply(this,r));if(!e)if(i instanceof ce){let s=Ue();return i.pipe(lt(s.outsideAngular),ut(s.insideAngular))}else return H(()=>i);return i instanceof ce?i.pipe(Rs):i instanceof Promise?H(()=>new Promise((s,a)=>i.then(o=>H(()=>s(o)),o=>H(()=>a(o))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:H(()=>i)};var B=class{constructor(e){return e}},fe=class{constructor(){return Ne()}};function Cs(n){return n&&n.length===1?n[0]:new B(Oe())}var Ut=new Ae("angularfire2._apps"),Os={provide:B,useFactory:Cs,deps:[[new W,Ut]]},Ns={provide:fe,deps:[[new W,Ut]]};function Ds(n){return(e,t)=>{let r=t.get(Mn);_("angularfire",he.full,"core"),_("angularfire",he.full,"app"),_("angular",xn.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new B(i)}}function uu(n,...e){return be([Os,Ns,{provide:Ut,useFactory:Ds(n),multi:!0,deps:[G,Se,Me,...e]}])}var lu=S(Dt,!0);function kr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Pr=kr,Cr=new k("auth","Firebase",kr());var He=new Z("@firebase/auth");function Ls(n,...e){He.logLevel<=p.WARN&&He.warn(`Auth (${ee}): ${n}`,...e)}function Fe(n,...e){He.logLevel<=p.ERROR&&He.error(`Auth (${ee}): ${n}`,...e)}function E(n,...e){throw rn(n,...e)}function w(n,...e){return rn(n,...e)}function nn(n,e,t){let r=Object.assign(Object.assign({},Pr()),{[e]:t});return new k("auth","Firebase",r).create(e,{appName:n.name})}function N(n){return nn(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ms(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&E(n,"argument-error"),nn(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rn(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Cr.create(n,...e)}function d(n,e,...t){if(!n)throw rn(e,...t)}function C(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Fe(e),new Error(e)}function D(n,e){n||C(e)}function Vt(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Us(){return hr()==="http:"||hr()==="https:"}function hr(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function xs(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Us()||zn()||"connection"in navigator)?navigator.onLine:!0}function Fs(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var z=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,D(t>e,"Short delay should be less than long delay!"),this.isMobile=Hn()||jn()}get(){return xs()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function sn(n,e){D(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Be=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;C("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;C("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;C("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Vs={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Ws=new z(3e4,6e4);function x(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function L(s,a,o,u){return c(this,arguments,function*(n,e,t,r,i={}){return Or(n,i,()=>c(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let f=J(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let I=Object.assign({method:e,headers:m},l);return Bn()||(I.referrerPolicy="no-referrer"),Be.fetch()(Nr(n,n.config.apiHost,t,f),I)}))})}function Or(n,e,t){return c(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Vs),e);try{let i=new Wt(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw xe(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let o=s.ok?a.errorMessage:a.error.message,[u,l]=o.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xe(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw xe(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw xe(n,"user-disabled",a);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw nn(n,h,l);E(n,h)}}catch(i){if(i instanceof y)throw i;E(n,"network-request-failed",{message:String(i)})}})}function Ee(s,a,o,u){return c(this,arguments,function*(n,e,t,r,i={}){let l=yield L(n,e,t,r,i);return"mfaPendingCredential"in l&&E(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function Nr(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?sn(n.config,i):`${n.config.apiScheme}://${i}`}function $s(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Wt=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(w(this.auth,"network-request-failed")),Ws.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function xe(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=w(n,e,r);return i.customData._tokenResponse=t,i}function fr(n){return n!==void 0&&n.enterprise!==void 0}var $t=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return $s(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Hs(n,e){return c(this,null,function*(){return L(n,"GET","/v2/recaptchaConfig",x(n,e))})}function Bs(n,e){return c(this,null,function*(){return L(n,"POST","/v1/accounts:delete",e)})}function Dr(n,e){return c(this,null,function*(){return L(n,"POST","/v1/accounts:lookup",e)})}function pe(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function an(n,e=!1){return c(this,null,function*(){let t=T(n),r=yield t.getIdToken(e),i=on(r);d(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:pe(xt(i.auth_time)),issuedAtTime:pe(xt(i.iat)),expirationTime:pe(xt(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function xt(n){return Number(n)*1e3}function on(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Fe("JWT malformed, contained fewer than 3 sections"),null;try{let i=pt(t);return i?JSON.parse(i):(Fe("Failed to decode base64 JWT payload"),null)}catch(i){return Fe("Caught error parsing JWT payload as JSON",i?.toString()),null}}function pr(n){let e=on(n);return d(e,"internal-error"),d(typeof e.exp<"u","internal-error"),d(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function re(n,e,t=!1){return c(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof y&&zs(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function zs({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ht=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>c(this,null,function*(){yield this.iteration()}),t)}iteration(){return c(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ge=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pe(this.lastLoginAt),this.creationTime=pe(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ze(n){return c(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield re(n,Dr(t,{idToken:r}));d(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Lr(s.providerUserInfo):[],o=js(n.providerData,a),u=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!o?.length,h=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ge(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)})}function cn(n){return c(this,null,function*(){let e=T(n);yield ze(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function js(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Lr(n){return n.map(e=>{var{providerId:t}=e,r=Te(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function qs(n,e){return c(this,null,function*(){let t=yield Or(n,{},()=>c(this,null,function*(){let r=J({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=Nr(n,i,"/v1/token",`key=${s}`),o=yield n._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Be.fetch()(a,{method:"POST",headers:o,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Gs(n,e){return c(this,null,function*(){return L(n,"POST","/v2/accounts:revokeToken",x(n,e))})}var me=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){d(e.idToken,"internal-error"),d(typeof e.idToken<"u","internal-error"),d(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){d(e.length!==0,"internal-error");let t=pr(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return c(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(d(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return c(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield qs(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(d(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(d(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(d(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return C("not implemented")}};function U(n,e){d(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ie=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Te(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ht(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ge(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return c(this,null,function*(){let t=yield re(this,this.stsTokenManager.getToken(this.auth,e));return d(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return an(this,e)}reload(){return cn(this)}_assign(e){this!==e&&(d(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){d(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return c(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ze(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return c(this,null,function*(){if(v(this.auth.app))return Promise.reject(N(this.auth));let e=yield this.getIdToken();return yield re(this,Bs(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,o,u,l,h;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,I=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,q=(a=t.photoURL)!==null&&a!==void 0?a:void 0,An=(o=t.tenantId)!==null&&o!==void 0?o:void 0,st=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,bn=(l=t.createdAt)!==null&&l!==void 0?l:void 0,Sn=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:at,emailVerified:Rn,isAnonymous:kn,providerData:ot,stsTokenManager:Pn}=t;d(at&&Pn,e,"internal-error");let ui=me.fromJSON(this.name,Pn);d(typeof at=="string",e,"internal-error"),U(f,e.name),U(m,e.name),d(typeof Rn=="boolean",e,"internal-error"),d(typeof kn=="boolean",e,"internal-error"),U(I,e.name),U(q,e.name),U(An,e.name),U(st,e.name),U(bn,e.name),U(Sn,e.name);let ct=new n({uid:at,auth:e,email:m,emailVerified:Rn,displayName:f,isAnonymous:kn,photoURL:q,phoneNumber:I,tenantId:An,stsTokenManager:ui,createdAt:bn,lastLoginAt:Sn});return ot&&Array.isArray(ot)&&(ct.providerData=ot.map(li=>Object.assign({},li))),st&&(ct._redirectEventId=st),ct}static _fromIdTokenResponse(e,t,r=!1){return c(this,null,function*(){let i=new me;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ze(s),s})}static _fromGetAccountInfoResponse(e,t,r){return c(this,null,function*(){let i=t.users[0];d(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Lr(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,o=new me;o.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ge(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var mr=new Map;function O(n){D(n instanceof Function,"Expected a class definition");let e=mr.get(n);return e?(D(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mr.set(n,e),e)}var Ks=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return c(this,null,function*(){return!0})}_set(t,r){return c(this,null,function*(){this.storage[t]=r})}_get(t){return c(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return c(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Bt=Ks;function Ve(n,e,t){return`firebase:${n}:${e}:${t}`}var je=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ve(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ve("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return c(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ie._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return c(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return c(this,null,function*(){if(!t.length)return new n(O(Bt),e,r);let i=(yield Promise.all(t.map(l=>c(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||O(Bt),a=Ve(r,e.config.apiKey,e.name),o=null;for(let l of t)try{let h=yield l._get(a);if(h){let f=ie._fromJSON(e,h);l!==s&&(o=f),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],o&&(yield s._set(a,o.toJSON())),yield Promise.all(t.map(l=>c(this,null,function*(){if(l!==s)try{yield l._remove(a)}catch{}}))),new n(s,e,r))})}};function gr(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fr(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mr(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Wr(e))return"Blackberry";if($r(e))return"Webos";if(Ur(e))return"Safari";if((e.includes("chrome/")||xr(e))&&!e.includes("edge/"))return"Chrome";if(Vr(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Mr(n=g()){return/firefox\//i.test(n)}function Ur(n=g()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xr(n=g()){return/crios\//i.test(n)}function Fr(n=g()){return/iemobile/i.test(n)}function Vr(n=g()){return/android/i.test(n)}function Wr(n=g()){return/blackberry/i.test(n)}function $r(n=g()){return/webos/i.test(n)}function un(n=g()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Js(n=g()){var e;return un(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ys(){return qn()&&document.documentMode===10}function Hr(n=g()){return un(n)||Vr(n)||$r(n)||Wr(n)||/windows phone/i.test(n)||Fr(n)}function Br(n,e=[]){let t;switch(n){case"Browser":t=gr(g());break;case"Worker":t=`${gr(g())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ee}/${r}`}var zt=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,o)=>{try{let u=e(s);a(u)}catch(u){o(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return c(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Xs(t){return c(this,arguments,function*(n,e={}){return L(n,"GET","/v2/passwordPolicy",x(n,e))})}var Zs=6,jt=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Zs,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,o;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var qt=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qe(this),this.idTokenSubscription=new qe(this),this.beforeStateQueue=new zt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=O(t)),this._initializationPromise=this.queue(()=>c(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield je.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return c(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return c(this,null,function*(){try{let t=yield Dr(this,{idToken:e}),r=yield ie._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return c(this,null,function*(){var t;if(v(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!a||a===o)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return d(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return c(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return c(this,null,function*(){try{yield ze(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Fs()}_delete(){return c(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return c(this,null,function*(){if(v(this.app))return Promise.reject(N(this));let t=e?T(e):null;return t&&d(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return c(this,null,function*(){if(!this._deleted)return e&&d(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>c(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return c(this,null,function*(){return v(this.app)?Promise.reject(N(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return v(this.app)?Promise.reject(N(this)):this.queue(()=>c(this,null,function*(){yield this.assertedPersistence.setPersistence(O(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return c(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return c(this,null,function*(){let e=yield Xs(this),t=new jt(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new k("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return c(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Gs(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return c(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return c(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&O(e)||this._popupRedirectResolver;d(t,this,"argument-error"),this.redirectPersistenceManager=yield je.create(this,[O(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return c(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>c(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return c(this,null,function*(){if(e===this.currentUser)return this.queue(()=>c(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(d(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{a=!0,u()}}else{let u=e.addObserver(t);return()=>{a=!0,u()}}}directlySetCurrentUser(e){return c(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return d(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Br(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return c(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return c(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Ls(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function F(n){return T(n)}var qe=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Yn(t=>this.observer=t)}get next(){return d(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var tt={loadJS(){return c(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qs(n){tt=n}function zr(n){return tt.loadJS(n)}function ea(){return tt.recaptchaEnterpriseScript}function ta(){return tt.gapiScript}function jr(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var na="recaptcha-enterprise",ra="NO_RECAPTCHA",Gt=class{constructor(e){this.type=na,this.auth=F(e)}verify(e="verify",t=!1){return c(this,null,function*(){function r(s){return c(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((a,o)=>c(this,null,function*(){Hs(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{let l=new $t(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,a(l.siteKey)}}).catch(u=>{o(u)})}))})}function i(s,a,o){let u=window.grecaptcha;fr(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{a(l)}).catch(()=>{a(ra)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!t&&fr(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=ea();u.length!==0&&(u+=o),zr(u).then(()=>{i(o,s,a)}).catch(l=>{a(l)})}}).catch(o=>{a(o)})})})}};function _r(n,e,t,r=!1){return c(this,null,function*(){let i=new Gt(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Kt(n,e,t,r){return c(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield _r(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>c(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield _r(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)}))})}function ln(n,e){let t=Nt(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(K(s,e??{}))return i;E(i,"already-initialized")}return t.initialize({options:e})}function ia(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(O);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function dn(n,e,t){let r=F(n);d(r._canInitEmulator,r,"emulator-config-failed"),d(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=qr(e),{host:a,port:o}=sa(e),u=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||aa()}function qr(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sa(n){let e=qr(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Ir(r.substr(s.length+1))}}else{let[s,a]=r.split(":");return{host:s,port:Ir(a)}}}function Ir(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function aa(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var se=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return C("not implemented")}_getIdTokenResponse(e){return C("not implemented")}_linkToIdToken(e,t){return C("not implemented")}_getReauthenticationResolver(e){return C("not implemented")}};function oa(n,e){return c(this,null,function*(){return L(n,"POST","/v1/accounts:signUp",e)})}function ca(n,e){return c(this,null,function*(){return Ee(n,"POST","/v1/accounts:signInWithPassword",x(n,e))})}function ua(n,e){return c(this,null,function*(){return Ee(n,"POST","/v1/accounts:signInWithEmailLink",x(n,e))})}function la(n,e){return c(this,null,function*(){return Ee(n,"POST","/v1/accounts:signInWithEmailLink",x(n,e))})}var _e=class n extends se{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return c(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kt(e,t,"signInWithPassword",ca);case"emailLink":return ua(e,{email:this._email,oobCode:this._password});default:E(e,"internal-error")}})}_linkToIdToken(e,t){return c(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kt(e,r,"signUpPassword",oa);case"emailLink":return la(e,{idToken:t,email:this._email,oobCode:this._password});default:E(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ne(n,e){return c(this,null,function*(){return Ee(n,"POST","/v1/accounts:signInWithIdp",x(n,e))})}var da="http://localhost",Ge=class n extends se{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):E("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Te(t,["providerId","signInMethod"]);if(!r||!i)return null;let a=new n(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return ne(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,ne(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,ne(e,t)}buildRequest(){let e={requestUri:da,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=J(t)}return e}};function ha(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fa(n){let e=Y(X(n)).link,t=e?Y(X(e)).deep_link_id:null,r=Y(X(n)).deep_link_id;return(r?Y(X(r)).link:null)||r||t||e||n}var Ke=class n{constructor(e){var t,r,i,s,a,o;let u=Y(X(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,f=ha((i=u.mode)!==null&&i!==void 0?i:null);d(l&&h&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=u.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){let t=fa(e);try{return new n(t)}catch{return null}}};var Gr=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return _e._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Ke.parseLink(r);return d(i,"argument-error"),_e._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Ie=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Je=class extends Ie{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var pa=(()=>{class n extends Je{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Ge._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function ma(n,e){return c(this,null,function*(){return Ee(n,"POST","/v1/accounts:signUp",x(n,e))})}var ae=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return c(this,null,function*(){let s=yield ie._fromIdTokenResponse(e,r,i),a=vr(r);return new n({user:s,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return c(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=vr(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function vr(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Jt=class n extends y{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Kr(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jt._fromErrorAndOperation(n,s,e,r):s})}function ga(n,e,t=!1){return c(this,null,function*(){let r=yield re(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ae._forOperation(n,"link",r)})}function _a(n,e,t=!1){return c(this,null,function*(){let{auth:r}=n;if(v(r.app))return Promise.reject(N(r));let i="reauthenticate";try{let s=yield re(n,Kr(r,i,e,n),t);d(s.idToken,r,"internal-error");let a=on(s.idToken);d(a,r,"internal-error");let{sub:o}=a;return d(n.uid===o,r,"user-mismatch"),ae._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&E(r,"user-mismatch"),s}})}function Jr(n,e,t=!1){return c(this,null,function*(){if(v(n.app))return Promise.reject(N(n));let r="signIn",i=yield Kr(n,r,e),s=yield ae._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function hn(n,e){return c(this,null,function*(){return Jr(F(n),e)})}function Yr(n){return c(this,null,function*(){let e=F(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function fn(n,e,t){return c(this,null,function*(){if(v(n.app))return Promise.reject(N(n));let r=F(n),a=yield Kt(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ma).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Yr(n),u}),o=yield ae._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(o.user),o})}function pn(n,e,t){return v(n.app)?Promise.reject(N(n)):hn(T(n),Gr.credential(e,t)).catch(r=>c(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Yr(n),r}))}function Ia(n,e){return c(this,null,function*(){return L(n,"POST","/v1/accounts:update",e)})}function mn(r,i){return c(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let s=T(n),o={idToken:yield s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield re(s,Ia(s.auth,o));s.displayName=u.displayName||null,s.photoURL=u.photoUrl||null;let l=s.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=s.displayName,l.photoURL=s.photoURL),yield s._updateTokensIfNecessary(u)})}function nt(n,e,t,r){return T(n).onIdTokenChanged(e,t,r)}function gn(n,e,t){return T(n).beforeAuthStateChanged(e,t)}function rt(n,e,t,r){return T(n).onAuthStateChanged(e,t,r)}function _n(n){return T(n).signOut()}var Ye="__sak";var Xe=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ye,"1"),this.storage.removeItem(Ye),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var va=1e3,Ea=10,ya=(()=>{class n extends Xe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hr(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,u,l)=>{this.notifyListeners(o,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let o=this.storage.getItem(i);!r&&this.localCache[i]===o||this.notifyListeners(i,o)},a=this.storage.getItem(i);Ys()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Ea):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},va)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return c(this,null,function*(){yield V(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return c(this,null,function*(){let r=yield V(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return c(this,null,function*(){yield V(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Xr=ya;var Ta=(()=>{class n extends Xe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),In=Ta;function wa(n){return Promise.all(n.map(e=>c(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Aa=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return c(this,null,function*(){let r=t,{eventId:i,eventType:s,data:a}=r.data,o=this.handlersMap[s];if(!o?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(o).map(h=>c(this,null,function*(){return h(r.origin,a)})),l=yield wa(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function vn(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Yt=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return c(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,u)=>{let l=vn("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(f){let m=f;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function R(){return window}function ba(n){R().location.href=n}function Zr(){return typeof R().WorkerGlobalScope<"u"&&typeof R().importScripts=="function"}function Sa(){return c(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Ra(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ka(){return Zr()?self:null}var Qr="firebaseLocalStorageDb",Pa=1,Ze="firebaseLocalStorage",ei="fbase_key",j=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function it(n,e){return n.transaction([Ze],e?"readwrite":"readonly").objectStore(Ze)}function Ca(){let n=indexedDB.deleteDatabase(Qr);return new j(n).toPromise()}function Xt(){let n=indexedDB.open(Qr,Pa);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Ze,{keyPath:ei})}catch(i){t(i)}}),n.addEventListener("success",()=>c(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Ze)?e(r):(r.close(),yield Ca(),e(yield Xt()))}))})}function Er(n,e,t){return c(this,null,function*(){let r=it(n,!0).put({[ei]:e,value:t});return new j(r).toPromise()})}function Oa(n,e){return c(this,null,function*(){let t=it(n,!1).get(e),r=yield new j(t).toPromise();return r===void 0?null:r.value})}function yr(n,e){let t=it(n,!0).delete(e);return new j(t).toPromise()}var Na=800,Da=3,La=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return c(this,null,function*(){return this.db?this.db:(this.db=yield Xt(),this.db)})}_withRetries(t){return c(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Da)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return c(this,null,function*(){return Zr()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return c(this,null,function*(){this.receiver=Aa._getInstance(ka()),this.receiver._subscribe("keyChanged",(t,r)=>c(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>c(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return c(this,null,function*(){var t,r;if(this.activeServiceWorker=yield Sa(),!this.activeServiceWorker)return;this.sender=new Yt(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return c(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Ra()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return c(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Xt();return yield Er(t,Ye,"1"),yield yr(t,Ye),!0}catch{}return!1})}_withPendingWrite(t){return c(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return c(this,null,function*(){return this._withPendingWrite(()=>c(this,null,function*(){return yield this._withRetries(i=>Er(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return c(this,null,function*(){let r=yield this._withRetries(i=>Oa(i,t));return this.localCache[t]=r,r})}_remove(t){return c(this,null,function*(){return this._withPendingWrite(()=>c(this,null,function*(){return yield this._withRetries(r=>yr(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return c(this,null,function*(){let t=yield this._withRetries(s=>{let a=it(s,!1).getAll();return new j(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>c(this,null,function*(){return this._poll()}),Na)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),ti=La;var Iu=jr("rcb"),vu=new z(3e4,6e4);function ni(n,e){return e?O(e):(d(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ve=class extends se{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ne(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ne(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ne(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Ma(n){return Jr(n.auth,new ve(n),n.bypassAuthState)}function Ua(n){let{auth:e,user:t}=n;return d(t,e,"internal-error"),_a(t,new ve(n),n.bypassAuthState)}function xa(n){return c(this,null,function*(){let{auth:e,user:t}=n;return d(t,e,"internal-error"),ga(t,new ve(n),n.bypassAuthState)})}var Qe=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>c(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return c(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(o)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ma;case"linkViaPopup":case"linkViaRedirect":return xa;case"reauthViaPopup":case"reauthViaRedirect":return Ua;default:E(this.auth,"internal-error")}}resolve(e){D(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){D(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Fa=new z(2e3,1e4);function En(n,e,t){return c(this,null,function*(){if(v(n.app))return Promise.reject(w(n,"operation-not-supported-in-this-environment"));let r=F(n);Ms(n,e,Ie);let i=ni(r,t);return new Va(r,"signInViaPopup",e,i).executeNotNull()})}var Va=(()=>{class n extends Qe{constructor(t,r,i,s,a){super(t,r,s,a),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return c(this,null,function*(){let t=yield this.execute();return d(t,this.auth,"internal-error"),t})}onExecution(){return c(this,null,function*(){D(this.filter.length===1,"Popup operations only handle one event");let t=vn();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(w(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(w(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(w(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Fa.get())};t()}}n.currentPopupAction=null;return n})(),Wa="pendingRedirect",We=new Map,Zt=class n extends Qe{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return c(this,null,function*(){let e=We.get(this.auth._key());if(!e){try{let r=(yield $a(this.resolver,this.auth))?yield V(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}We.set(this.auth._key(),e)}return this.bypassAuthState||We.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return c(this,null,function*(){if(e.type==="signInViaRedirect")return V(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,V(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return c(this,null,function*(){})}cleanUp(){}};function $a(n,e){return c(this,null,function*(){let t=za(e),r=Ba(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function Ha(n,e){We.set(n._key(),e)}function Ba(n){return O(n._redirectPersistence)}function za(n){return Ve(Wa,n.config.apiKey,n.name)}function ja(n,e,t=!1){return c(this,null,function*(){if(v(n.app))return Promise.reject(N(n));let r=F(n),i=ni(r,e),a=yield new Zt(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var qa=10*60*1e3,Qt=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ga(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ri(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(w(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qa&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tr(e))}saveEventToCache(e){this.cachedEventUids.add(Tr(e)),this.lastProcessedEventTime=Date.now()}};function Tr(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ri({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Ga(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ri(n);default:return!1}}function Ka(t){return c(this,arguments,function*(n,e={}){return L(n,"GET","/v1/projects",e)})}var Ja=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ya=/^https?/;function Xa(n){return c(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Ka(n);for(let t of e)try{if(Za(t))return}catch{}E(n,"unauthorized-domain")})}function Za(n){let e=Vt(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Ya.test(t))return!1;if(Ja.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Qa=new z(3e4,6e4);function wr(){let n=R().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function eo(n){return new Promise((e,t)=>{var r,i,s;function a(){wr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wr(),t(w(n,"network-request-failed"))},timeout:Qa.get()})}if(!((i=(r=R().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=R().gapi)===null||s===void 0)&&s.load)a();else{let o=jr("iframefcb");return R()[o]=()=>{gapi.load?a():t(w(n,"network-request-failed"))},zr(`${ta()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw $e=null,e})}var $e=null;function to(n){return $e=$e||eo(n),$e}var no=new z(5e3,15e3),ro="__/auth/iframe",io="emulator/auth/iframe",so={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ao=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oo(n){let e=n.config;d(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?sn(e,io):`https://${n.config.authDomain}/${ro}`,r={apiKey:e.apiKey,appName:n.name,v:ee},i=ao.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${J(r).slice(1)}`}function co(n){return c(this,null,function*(){let e=yield to(n),t=R().gapi;return d(t,n,"internal-error"),e.open({where:document.body,url:oo(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:so,dontclear:!0},r=>new Promise((i,s)=>c(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=w(n,"network-request-failed"),o=R().setTimeout(()=>{s(a)},no.get());function u(){R().clearTimeout(o),i(r)}r.ping(u).then(u,()=>{s(a)})})))})}var uo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lo=500,ho=600,fo="_blank",po="http://localhost",et=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function mo(n,e,t,r=lo,i=ho){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),o="",u=Object.assign(Object.assign({},uo),{width:r.toString(),height:i.toString(),top:s,left:a}),l=g().toLowerCase();t&&(o=xr(l)?fo:t),Mr(l)&&(e=e||po,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[I,q])=>`${m}${I}=${q},`,"");if(Js(l)&&o!=="_self")return go(e||"",o),new et(null);let f=window.open(e||"",o,h);d(f,n,"popup-blocked");try{f.focus()}catch{}return new et(f)}function go(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var _o="__/auth/handler",Io="emulator/auth/handler",vo=encodeURIComponent("fac");function Ar(n,e,t,r,i,s){return c(this,null,function*(){d(n.config.authDomain,n,"auth-domain-config-required"),d(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ee,eventId:i};if(e instanceof Ie){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Jn(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,f]of Object.entries(s||{}))a[h]=f}if(e instanceof Je){let h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}n.tenantId&&(a.tid=n.tenantId);let o=a;for(let h of Object.keys(o))o[h]===void 0&&delete o[h];let u=yield n._getAppCheckToken(),l=u?`#${vo}=${encodeURIComponent(u)}`:"";return`${Eo(n)}?${J(o).slice(1)}${l}`})}function Eo({config:n}){return n.emulator?sn(n,Io):`https://${n.authDomain}/${_o}`}var Ft="webStorageSupport",en=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=In,this._completeRedirectFn=ja,this._overrideRedirectResult=Ha}_openPopup(e,t,r,i){return c(this,null,function*(){var s;D((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield Ar(e,t,r,Vt(),i);return mo(e,a,vn())})}_openRedirect(e,t,r,i){return c(this,null,function*(){yield this._originValidation(e);let s=yield Ar(e,t,r,Vt(),i);return ba(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(D(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return c(this,null,function*(){let t=yield co(e),r=new Qt(e);return t.register("authEvent",i=>(d(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ft,{type:Ft},i=>{var s;let a=(s=i?.[0])===null||s===void 0?void 0:s[Ft];a!==void 0&&t(!!a),E(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Xa(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hr()||Ur()||un()}},ii=en;var br="@firebase/auth",Sr="1.7.9";var tn=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return c(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){d(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function yo(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function To(n){Q(new A("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;d(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Br(n)},l=new qt(r,i,s,u);return ia(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Q(new A("auth-internal",e=>{let t=F(e.getProvider("auth").getImmediate());return(r=>new tn(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_(br,Sr,yo(n)),_(br,Sr,"esm2017")}var wo=5*60,Ao=_t("authIdTokenMaxAge")||wo,Rr=null,bo=n=>e=>c(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Ao)return;let i=t?.token;Rr!==i&&(Rr=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function yn(n=Oe()){let e=Nt(n,"auth");if(e.isInitialized())return e.getImmediate();let t=ln(n,{popupRedirectResolver:ii,persistence:[ti,Xr,In]}),r=_t("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let a=bo(s.toString());gn(t,a,()=>a(t.currentUser)),nt(t,o=>a(o))}}let i=mt("auth");return i&&dn(t,`http://${i}`),t}function So(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Qs({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=w("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",So().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});To("Browser");function ai(n){return new ce(function(e){var t=rt(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var oi="auth",ye=class{constructor(e){return e}},Tn=class{constructor(){return Mt(oi)}};var wn=new Ae("angularfire2.auth-instances");function hc(n,e){let t=dr(oi,n,e);return t&&new ye(t)}function fc(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ye(r)}}var pc={provide:Tn,deps:[[new W,wn]]},mc={provide:ye,useFactory:hc,deps:[[new W,wn],B]};function cl(n,...e){return _("angularfire",he.full,"auth"),be([mc,pc,{provide:wn,useFactory:fc(n),multi:!0,deps:[G,Se,Me,fe,[new W,De],...e]}])}var ul=S(ai,!0);var ll=S(fn,!0);var dl=S(yn,!0);var hl=S(pn,!0);var fl=S(En,!0);var pl=S(_n,!0);var ml=S(mn,!0);var ci=class n{static isArray(e,t=!0){return Array.isArray(e)&&(t||e.length!==0)}static isObject(e,t=!0){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&(t||Object.keys(e).length!==0)}static equals(e,t,r){return r?this.resolveFieldData(e,r)===this.resolveFieldData(t,r):this.equalsByValue(e,t)}static equalsByValue(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Array.isArray(e),i=Array.isArray(t),s,a,o;if(r&&i){if(a=e.length,a!=t.length)return!1;for(s=a;s--!==0;)if(!this.equalsByValue(e[s],t[s]))return!1;return!0}if(r!=i)return!1;var u=this.isDate(e),l=this.isDate(t);if(u!=l)return!1;if(u&&l)return e.getTime()==t.getTime();var h=e instanceof RegExp,f=t instanceof RegExp;if(h!=f)return!1;if(h&&f)return e.toString()==t.toString();var m=Object.keys(e);if(a=m.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,m[s]))return!1;for(s=a;s--!==0;)if(o=m[s],!this.equalsByValue(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}static resolveFieldData(e,t){if(e&&t){if(this.isFunction(t))return t(e);if(t.indexOf(".")==-1)return e[t];{let r=t.split("."),i=e;for(let s=0,a=r.length;s<a;++s){if(i==null)return null;i=i[r[s]]}return i}}else return null}static isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}static reorderArray(e,t,r){let i;e&&t!==r&&(r>=e.length&&(r%=e.length,t%=e.length),e.splice(r,0,e.splice(t,1)[0]))}static insertIntoOrderedArray(e,t,r,i){if(r.length>0){let s=!1;for(let a=0;a<r.length;a++)if(this.findIndexInList(r[a],i)>t){r.splice(a,0,e),s=!0;break}s||r.push(e)}else r.push(e)}static findIndexInList(e,t){let r=-1;if(t){for(let i=0;i<t.length;i++)if(t[i]==e){r=i;break}}return r}static contains(e,t){if(e!=null&&t&&t.length){for(let r of t)if(this.equals(e,r))return!0}return!1}static removeAccents(e){return e&&(e=e.normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"")),e}static isDate(e){return Object.prototype.toString.call(e)==="[object Date]"}static isEmpty(e){return e==null||e===""||Array.isArray(e)&&e.length===0||!this.isDate(e)&&typeof e=="object"&&Object.keys(e).length===0}static isNotEmpty(e){return!this.isEmpty(e)}static compare(e,t,r,i=1){let s=-1,a=this.isEmpty(e),o=this.isEmpty(t);return a&&o?s=0:a?s=i:o?s=-i:typeof e=="string"&&typeof t=="string"?s=e.localeCompare(t,r,{numeric:!0}):s=e<t?-1:e>t?1:0,s}static sort(e,t,r=1,i,s=1){let a=n.compare(e,t,i,r),o=r;return(n.isEmpty(e)||n.isEmpty(t))&&(o=s===1?r:s),o*a}static merge(e,t){if(!(e==null&&t==null)){{if((e==null||typeof e=="object")&&(t==null||typeof t=="object"))return oe(oe({},e||{}),t||{});if((e==null||typeof e=="string")&&(t==null||typeof t=="string"))return[e||"",t||""].join(" ")}return t||e}}static isPrintableCharacter(e=""){return this.isNotEmpty(e)&&e.length===1&&e.match(/\S| /)}static getItemValue(e,...t){return this.isFunction(e)?e(...t):e}static findLastIndex(e,t){let r=-1;if(this.isNotEmpty(e))try{r=e.findLastIndex(t)}catch{r=e.lastIndexOf([...e].reverse().find(t))}return r}static findLast(e,t){let r;if(this.isNotEmpty(e))try{r=e.findLast(t)}catch{r=[...e].reverse().find(t)}return r}static deepEquals(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=Array.isArray(e),i=Array.isArray(t),s,a,o;if(r&&i){if(a=e.length,a!=t.length)return!1;for(s=a;s--!==0;)if(!this.deepEquals(e[s],t[s]))return!1;return!0}if(r!=i)return!1;var u=e instanceof Date,l=t instanceof Date;if(u!=l)return!1;if(u&&l)return e.getTime()==t.getTime();var h=e instanceof RegExp,f=t instanceof RegExp;if(h!=f)return!1;if(h&&f)return e.toString()==t.toString();var m=Object.keys(e);if(a=m.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,m[s]))return!1;for(s=a;s--!==0;)if(o=m[s],!this.deepEquals(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}static minifyCSS(e){return e&&e.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!").replace(/: /g,":")}static toFlatCase(e){return this.isString(e)?e.replace(/(-|_)/g,"").toLowerCase():e}static isString(e,t=!0){return typeof e=="string"&&(t||e!=="")}};function gc(){let n=[],e=(s,a)=>{let o=n.length>0?n[n.length-1]:{key:s,value:a},u=o.value+(o.key===s?0:a)+2;return n.push({key:s,value:u}),u},t=s=>{n=n.filter(a=>a.value!==s)},r=()=>n.length>0?n[n.length-1].value:0,i=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:i,set:(s,a,o)=>{a&&(a.style.zIndex=String(e(s,o)))},clear:s=>{s&&(t(i(s)),s.style.zIndex="")},getCurrent:()=>r()}}var Il=gc();export{Ec as a,yc as b,g as c,Tc as d,y as e,T as f,A as g,p as h,Z as i,Q as j,Nt as k,ee as l,Oe as m,_ as n,he as o,dr as p,Mt as q,De as r,Me as s,S as t,B as u,fe as v,uu as w,lu as x,pa as y,ye as z,Tn as A,cl as B,ul as C,ll as D,dl as E,hl as F,fl as G,pl as H,ml as I,_c as J,Fn as K,ci as L,Il as M};
